---
import { ViewTransitions } from 'astro:transitions'
import '@fontsource/poppins'

import Navbar from '@/components/Navbar.astro'
import { basics } from '@cv'

interface Props {
  title: string
}

const { title } = Astro.props

const { image, summary, url } = basics
---

<!doctype html>
<html
  lang='es'
  class='relative scroll-p-8 scroll-smooth antialiased dark:bg-primary dark:text-white'
>
  <head>
    <meta charset='UTF-8' />
    <title>{title}</title>
    <meta
      name='description'
      content={summary}
    />
    <meta
      name='viewport'
      content='width=device-width'
    />
    <link
      rel='icon'
      type='image/svg+xml'
      href='/favicon.svg'
    />
    <link
      rel='preload'
      as='image'
      href={image}
    />

    <meta
      property='og:url'
      content={url}
    />
    <meta
      property='og:type'
      content='website'
    />
    <meta
      property='og:title'
      content={title}
    />
    <meta
      property='og:description'
      content={summary}
    />
    <meta
      property='og:image'
      content={image}
    />

    <meta
      name='twitter:card'
      content='summary_large_image'
    />
    <meta
      property='twitter:domain'
      content={url.split('//')[1] ?? ''}
    />
    <meta
      property='twitter:url'
      content={url}
    />
    <meta
      name='twitter:title'
      content={title}
    />
    <meta
      name='twitter:description'
      content={summary}
    />
    <meta
      name='twitter:image'
      content={image}
    />
    <meta
      name='theme-color'
      media='(prefers-color-scheme: light)'
      content='white'
    />
    <meta
      name='theme-color'
      media='(prefers-color-scheme: dark)'
      content='#232323'
    />
    <ViewTransitions />
  </head>
  <body class='flex'>
    <Navbar />
    <slot />
    <script>
      import tippy from 'tippy.js'
      import 'tippy.js/dist/tippy.css'
      import 'tippy.js/animations/shift-away.css'

      document.addEventListener('astro:page-load', () => {
        tippy('[data-tippy-content]', {
          animation: 'shift-away',
          placement: 'right',
          touch: false
        })
      })
    </script>
  </body>
</html>
