---
import Post from '@/components/blog/Post.astro'
import Bmc from '@/icons/Bmc.astro'
import Layout from '@/layouts/Layout.astro'

import { getCollection } from 'astro:content'
const allPosts = await (
  await getCollection('blog')
).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
---

<Layout title='Home'>
  <main class='w-full'>
    <div class='w-full px-6 pb-6'>
      <section
        class='mx-auto flex w-full max-w-[65ch] flex-col gap-6 dark:border-r-neutral-800'
        id='blog-list'
      >
        <header class='flex items-center justify-between pt-6 md:pt-[65px]'>
          <h1 class='text-xl'>Blog</h1>
          <div>
            <button> RSS </button>
            <button> Filter </button>
          </div>
        </header>
        <div class='mb-16 flex flex-col gap-2 sm:mb-0'>
          {allPosts.map((post) => <Post post={post} />)}
        </div>
      </section>
    </div>
    <footer
      class='dark:bg-primary/80 sticky bottom-[65px] h-[65px] w-full backdrop-blur md:bottom-0'
    >
      <a
        href='/'
        class='dark:border-t-primary mx-auto flex h-full w-full max-w-[65ch] items-center justify-center gap-2 border-t'
      >
        <Bmc /> <span>Invítame a un café</span></a
      >
    </footer>
  </main>
</Layout>

<style>
  .bloglist {
    scrollbar-width: none;
  }
</style>
